import type { ProductType } from '../lib/algebraic_type';
import type { ReducerSchema } from '../lib/reducer_schema';
import type { ParamsObj } from '../lib/reducers';
import type { CoerceRow } from '../lib/table';
import { type InferTypeOfRow } from '../lib/type_builders';
import type { CamelCase } from '../lib/type_util';
import type { SubscriptionEventContextInterface } from './event_context';
import type { UntypedRemoteModule } from './spacetime_module';
export type SubscriptionEventCallback<RemoteModule extends UntypedRemoteModule> = (ctx: SubscriptionEventContextInterface<RemoteModule>) => void;
type IfAny<T, Y, N> = 0 extends 1 & T ? Y : N;
type ReducersViewLoose = {
    [k: string]: (params: any) => Promise<void>;
};
export type ReducersView<RemoteModule> = IfAny<RemoteModule, ReducersViewLoose, RemoteModule extends UntypedRemoteModule ? {
    [K in RemoteModule['reducers'][number] as CamelCase<K['accessorName']>]: (params: InferTypeOfRow<K['params']>) => Promise<void>;
} : never>;
export type ReducerEventInfo<Name extends string = string, Args extends object = object> = {
    name: Name;
    args: Args;
};
export type UntypedReducerDef = {
    name: string;
    accessorName: string;
    params: CoerceRow<ParamsObj>;
    paramsType: ProductType;
};
export type UntypedReducersDef = {
    reducers: readonly UntypedReducerDef[];
};
declare class Reducers<ReducersDef extends UntypedReducersDef> {
    reducersType: ReducersDef;
    constructor(handles: readonly ReducerSchema<any, any>[]);
}
/**
 * Helper type to convert an array of TableSchema into a schema definition
 */
type ReducersToSchema<T extends readonly ReducerSchema<any, any>[]> = {
    reducers: {
        /** @type {UntypedReducerDef} */
        readonly [i in keyof T]: {
            name: T[i]['reducerName'];
            accessorName: CamelCase<T[i]['accessorName']>;
            params: T[i]['params']['row'];
            paramsType: T[i]['paramsSpacetimeType'];
        };
    };
};
export declare function reducersToSchema<const T extends readonly ReducerSchema<any, any>[]>(reducers: T): ReducersToSchema<T>;
/**
 * Creates a schema from table definitions
 * @param handles - Array of table handles created by table() function
 * @returns ColumnBuilder representing the complete database schema
 * @example
 * ```ts
 * const s = schema({
 *   user: table({}, userType),
 *   post: table({}, postType)
 * });
 * ```
 */
export declare function reducers<const H extends readonly ReducerSchema<any, any>[]>(...handles: H): Reducers<ReducersToSchema<H>>;
/**
 * Creates a schema from table definitions (array overload)
 * @param handles - Array of table handles created by table() function
 * @returns ColumnBuilder representing the complete database schema
 */
export declare function reducers<const H extends readonly ReducerSchema<any, any>[]>(handles: H): Reducers<ReducersToSchema<H>>;
export declare function reducerSchema<ReducerName extends string, Params extends ParamsObj>(name: ReducerName, params: Params): ReducerSchema<ReducerName, Params>;
export {};
//# sourceMappingURL=reducers.d.ts.map